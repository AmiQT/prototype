---
import AuroraDashboardLayout from "../../layouts/AuroraDashboardLayout.astro";
import GlassCard from "../../components/GlassCard.astro";
import GlassButton from "../../components/GlassButton.astro";
---

<AuroraDashboardLayout title="Analytics" activeSection="analytics">
    <div class="p-4 flex gap-3 justify-end">
        <GlassButton icon="fas fa-file-pdf">Generate PDF</GlassButton>
        <GlassButton icon="fas fa-file-csv">Export CSV</GlassButton>
    </div>

    <div class="aurora-grid">
        <GlassCard size="wide" glow={true}>
            <h3 class="text-lg font-bold text-white mb-4">ðŸ“ˆ User Growth</h3>
            <div class="glass-card p-4 h-64">
                <canvas id="auroraUserChart"></canvas>
            </div>
        </GlassCard>

        <GlassCard size="small">
            <i class="fas fa-dollar-sign text-3xl text-white/80 mb-3"></i>
            <h4 class="text-xs font-semibold text-white/70 uppercase mb-1">
                Revenue
            </h4>
            <p class="text-3xl font-bold text-white">$45.2K</p>
        </GlassCard>

        <GlassCard size="small">
            <i class="fas fa-user-check text-3xl text-white/80 mb-3"></i>
            <h4 class="text-xs font-semibold text-white/70 uppercase mb-1">
                Active Users
            </h4>
            <p class="text-3xl font-bold text-white">1,234</p>
        </GlassCard>

        <GlassCard size="small">
            <i class="fas fa-chart-pie text-3xl text-white/80 mb-3"></i>
            <h4 class="text-xs font-semibold text-white/70 uppercase mb-1">
                Conversion
            </h4>
            <p class="text-3xl font-bold text-white">23.5%</p>
        </GlassCard>

        <GlassCard size="full" glow={true}>
            <h3 class="text-lg font-bold text-white mb-4">
                ðŸ“Š Event Participation
            </h3>
            <div class="glass-card p-4 h-64">
                <canvas id="auroraEventChart"></canvas>
            </div>
        </GlassCard>
    </div>

    <script>
        import Chart from "chart.js/auto";

        document.addEventListener("DOMContentLoaded", () => {
            const userCtx = document.getElementById(
                "auroraUserChart",
            ) as HTMLCanvasElement;
            if (userCtx) {
                new Chart(userCtx, {
                    type: "line",
                    data: {
                        labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
                        datasets: [
                            {
                                label: "New Users",
                                data: [65, 89, 123, 156, 201, 234],
                                borderColor: "#ffffff",
                                backgroundColor: "rgba(255, 255, 255, 0.1)",
                                borderWidth: 3,
                                tension: 0.4,
                                pointRadius: 5,
                                pointBackgroundColor: "#667eea",
                                pointBorderColor: "#ffffff",
                                pointBorderWidth: 2,
                            },
                        ],
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: { color: "rgba(255, 255, 255, 0.1)" },
                                ticks: { color: "#ffffff" },
                            },
                            x: {
                                grid: { color: "rgba(255, 255, 255, 0.1)" },
                                ticks: { color: "#ffffff" },
                            },
                        },
                    },
                });
            }

            const eventCtx = document.getElementById(
                "auroraEventChart",
            ) as HTMLCanvasElement;
            if (eventCtx) {
                new Chart(eventCtx, {
                    type: "bar",
                    data: {
                        labels: [
                            "Hackathon",
                            "Career Fair",
                            "Workshop",
                            "Seminar",
                        ],
                        datasets: [
                            {
                                label: "Participants",
                                data: [256, 189, 142, 98],
                                backgroundColor: [
                                    "rgba(102, 126, 234, 0.8)",
                                    "rgba(118, 75, 162, 0.8)",
                                    "rgba(240, 147, 251, 0.8)",
                                    "rgba(79, 172, 254, 0.8)",
                                ],
                                borderColor: "#ffffff",
                                borderWidth: 2,
                            },
                        ],
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: { color: "rgba(255, 255, 255, 0.1)" },
                                ticks: { color: "#ffffff" },
                            },
                            x: {
                                grid: { display: false },
                                ticks: { color: "#ffffff" },
                            },
                        },
                    },
                });
            }
        });
    </script>
</AuroraDashboardLayout>

<style>
    @import url("../../styles/glassmorphism.css");
</style>
